<div class="order-header">
  <button class="back-btn" (click)="goBack()">
    <mat-icon>arrow_back</mat-icon>
  </button>

  <h2 class="header-title">Orders - Table {{ tableId.replace('T','') }}</h2>

  <div class="search-container">
    <span class="search-icon">üîç</span>
    <input type="text" class="search-input" placeholder="Search items..."
           [(ngModel)]="searchText" (input)="filterMenu(searchText)" />
  </div>
</div>


<div class="orders-layout" [class.full-width]="cartCount === 0">

  <!-- LEFT SIDE MENU -->
  <div class="menu-box">
    <div class="menu-scroll">
      <app-menu-list 
        [quantities]="quantities"
        [cartCount]="cartCount"
        (quantityChange)="onQuantityChange($event)">
      </app-menu-list>
    </div>
  </div>

  <!-- RIGHT SIDE ORDER PANEL -->
  <div class="order-box" *ngIf="cartCount > 0">

    <h2 class="section-title">Order Items</h2>

    <!-- SCROLLING LIST -->
    <div class="order-scroll">
      <div class="order-row" *ngFor="let c of cart | keyvalue">
        
        <div class="order-name">{{ $any(c.value).name }}</div>

        <div class="qty-box">
          <button class="qty-btn" (click)="decreaseQty($any(c.value))">‚àí</button>
          <span class="qty-value">{{ $any(c.value).qty }}</span>
          <button class="qty-btn" (click)="increaseQty($any(c.value))">+</button>
        </div>

        <div class="order-price">
          ‚Çπ {{ $any(c.value).price * $any(c.value).qty }}
        </div>

      </div>
    </div>

    <!-- FIXED BOTTOM -->
    <div class="order-bottom">

      <div class="order-type-row">
        <button class="type-btn" [class.active]="orderType === 'Dine'" (click)="orderType = 'Dine'">Dine</button>
        <button class="type-btn" [class.active]="orderType === 'Parcel'" (click)="orderType = 'Parcel'">Parcel</button>
        <button class="type-btn" [class.active]="orderType === 'Delivery'" (click)="orderType = 'Delivery'">Delivery</button>
      </div>

      <div class="discount-row">
        <span>Discount (%)</span>
        <input type="number" class="discount-input" [(ngModel)]="discountPercent" (input)="calculateTotals()" min="0"
          max="100" placeholder="0" />
      </div>

      <div class="bill-details">
        <div class="bill-line">
          <span>Item Total</span><span>‚Çπ {{ subtotal }}</span>
        </div>

        <div class="bill-line">
          <span>Tax (5%)</span><span>‚Çπ {{ tax }}</span>
        </div>

        <div class="divider"></div>

        <div class="bill-pay">
          <span>TO PAY</span><span>‚Çπ {{ total }}</span>
        </div>
      </div>

     <button 
  class="proceed-btn" 
  *ngIf="!isCheckoutMode" 
  (click)="onProceedClick()">
  Proceed
</button>

<button 
  class="proceed-btn checkout" 
  *ngIf="isCheckoutMode" 
  (click)="checkout()">
  Checkout
</button>

    </div>
  </div>

</div>
