<div class="dining-layout" [class.reports-hidden]="!showReports">


  <!-- LEFT TABLES -->
  <div class="tables-section">

    <!-- üîí FIXED HEADER -->
    <div class="tables-header">

      <div class="header-row">

        <!-- FILTER TABS -->
        <div class="section-tabs-wrapper">
          <div class="section-tabs">

            <button class="tab" [class.active]="selectedSection === 'ALL'" (click)="selectSection('ALL')">
              ALL
            </button>

            <button class="tab" *ngFor="let sec of sections" [class.active]="selectedSection === sec.name"
              (click)="selectSection(sec.name)">
              {{ sec.name }}
            </button>


          </div>
        </div>

        <!-- INFO ICON -->
        <div class="status-info">
          ‚ìò
          <div class="status-tooltip">
            <div class="legend-item">
              <span class="dot available"></span> Available
            </div>
            <div class="legend-item">
              <span class="dot occupied"></span> Occupied
            </div>
            <div class="legend-item">
              <span class="dot ordered"></span> Ordered
            </div>
            <div class="legend-item">
              <span class="dot billing"></span> Billing
            </div>
          </div>
        </div>

      </div>

    </div>

    <!-- üîΩ SCROLLABLE TABLES -->
    <div class="tables-body">

      <ng-container *ngIf="!loadingTables && filteredSections.length">

        <div class="zone-box" *ngFor="let section of filteredSections">

          <h2 class="zone-title">
            {{ section.name }}
          </h2>

          <div class="table-grid">
            <div class="table-card" *ngFor="let t of section.tables" (click)="openOrders(t, section.name)"
              [class.occupied]="getTableStatus(t) === 'occupied'" [class.ordered]="getTableStatus(t) === 'ordered'"
              [class.billing]="getTableStatus(t) === 'billing'">

              <div class="table-inner">
                {{ getDisplayName(t) }}

                <div class="timer" *ngIf="getTimer(t)">
                  ‚è± {{ getTimer(t) }}
                </div>
              </div>

            </div>
          </div>



        </div>

      </ng-container>

    </div>

  </div>


  <!-- ===== RIGHT SIDE VERTICAL REPORTS BUTTON ===== -->
  <button class="reports-vertical-toggle" *ngIf="!showReports" (click)="toggleReports()">
    R<br />e<br />p<br />o<br />r<br />t<br />s
  </button>

  <!-- RIGHT REPORTS PANEL -->

  <!-- ================= REPORTS PANEL ================= -->

  <!-- ===== SKELETON STATE ===== -->
  <div *ngIf="loadingReports && showReports" class="reports-panel">
    <!-- HEADER -->
    <div class="reports-header">
      <h3 class="reports-title skeleton skeleton-title"></h3>
    </div>

    <!-- TOTAL ORDERS -->
    <div class="report-card">
      <span class="label skeleton skeleton-label"></span>
      <div class="value-row">
        <span class="value skeleton skeleton-value"></span>
        <span class="trend skeleton skeleton-trend"></span>
      </div>
    </div>

    <!-- ACTIVE TABLES -->
    <div class="report-card">
      <span class="label skeleton skeleton-label"></span>
      <span class="value skeleton skeleton-value"></span>
    </div>

    <!-- TOTAL REVENUE -->
    <div class="report-card highlight">
      <span class="label skeleton skeleton-label"></span>
      <span class="value skeleton skeleton-value"></span>
    </div>

    <!-- TOP SELLING ITEMS -->
    <div class="report-card list">
      <div class="list-header">
        <span class="label skeleton skeleton-label"></span>
        <div class="skeleton skeleton-dropdown"></div>
      </div>

      <ul>
        <li *ngFor="let i of [1,2,3,4,5]">
          <span class="skeleton skeleton-item-name"></span>
          <span class="skeleton skeleton-item-qty"></span>
        </li>
      </ul>
    </div>

    <!-- ORDERS COMPARISON -->
    <div class="report-card chart">
      <span class="label skeleton skeleton-label"></span>

      <div class="mini-chart">
        <div class="bar">
          <span class="skeleton skeleton-bar-label"></span>
          <div class="track skeleton"></div>
          <span class="skeleton skeleton-bar-value"></span>
        </div>

        <div class="bar">
          <span class="skeleton skeleton-bar-label"></span>
          <div class="track skeleton"></div>
          <span class="skeleton skeleton-bar-value"></span>
        </div>
      </div>
    </div>

  </div>

  <!-- ===== REAL DATA STATE ===== -->
  <div *ngIf="!loadingReports && showReports" class="reports-panel">


    <!-- REPORTS HEADER -->
    <div class="reports-header">
      <h3 class="reports-title">
        Reports
        <button class="nav-icon inline" title="Open Reports" (click)="goToReports()">
          ‚Üó
        </button>
      </h3>
      <button class="reports-close-btn" (click)="toggleReports()">‚úï</button>
    </div>

    <!-- TOTAL ORDERS -->
    <div class="report-card">
      <span class="label">Total Orders</span>

      <div class="value-row">
        <span class="value">{{ totalOrders }}</span>

        <span class="trend" [ngClass]="orderTrendDirection">
          <span *ngIf="orderTrendDirection === 'up'">‚ñ≤</span>
          <span *ngIf="orderTrendDirection === 'down'">‚ñº</span>
          <span *ngIf="orderTrendDirection === 'same'">‚Äî</span>
          {{ orderTrendPercent | number:'1.0-0' }}%
        </span>
      </div>
    </div>

    <!-- ACTIVE TABLES -->
    <div class="report-card">
      <span class="label">Active Tables</span>
      <span class="value">{{ activeTables }}</span>
    </div>

    <!-- TOTAL REVENUE -->
    <div class="report-card highlight">
      <span class="label">Total Revenue</span>
      <span class="value">‚Çπ {{ totalRevenue }}</span>
    </div>

    <!-- TOP SELLING ITEMS -->
    <div class="report-card list">
      <div class="list-header">
        <span class="label">Top Selling Items</span>

        <select class="range-select" [(ngModel)]="topItemsRange" (change)="loadTodayReports()">
          <option value="today">Today</option>
          <option value="week">This Week</option>
          <option value="month">This Month</option>
        </select>
      </div>

      <ul>
        <li *ngFor="let item of topItems">
          <span class="item-name">{{ item.name }}</span>
          <span class="item-qty">{{ item.qty }}</span>
        </li>
      </ul>
    </div>

    <!-- ORDERS COMPARISON -->
    <div class="report-card chart">
      <span class="label">Orders Comparison</span>

      <div class="mini-chart">
        <div class="bar">
          <span>Yesterday</span>
          <div class="track">
            <div class="fill yesterday" [style.width.%]="yesterdayPercent"></div>
          </div>
          <strong>{{ yesterdayOrders }}</strong>
        </div>

        <div class="bar">
          <span>Today</span>
          <div class="track">
            <div class="fill today" [style.width.%]="todayPercent"></div>
          </div>
          <strong>{{ totalOrders }}</strong>
        </div>
      </div>
    </div>

  </div>